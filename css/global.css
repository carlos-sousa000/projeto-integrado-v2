/* global.css - otimizado para evitar "faixas" / flicker ao trocar tema
   mantém sua paleta sépia/latão, adiciona fallback sólido e remove transições de background */

/* fontes + icons */
@import url("https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Roboto:wght@300;400;500;700&display=swap");
@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css");

/* --------------------
   Variáveis principais
   -------------------- */
:root {
  /* Paleta histórica / industrial (originais) */
  --paper: #f4ead8;
  --paper-dark: #e8dcc4;
  --ink: #2b1f16;
  --muted-ink: #5b463a;
  --brass: #b07a2b;
  --brass-dark: #8f5f1c;
  --iron: #3f4b4f;
  --accent: var(--brass);
  --accent-strong: var(--brass-dark);

  /* fundos: introduzimos um fallback sólido para evitar banding */
  --cor-fundo-principal-solid: #efe2c8; /* cor sólida para anti-flicker */
  --cor-fundo-principal-grad: linear-gradient(180deg, var(--paper), #efe2c8);
  /* para compatibilidade com código antigo, mantemos a variável antiga */
  --cor-fundo-principal: var(--cor-fundo-principal-grad);

  /* outros */
  --shadow: rgba(22, 18, 12, 0.18);
  --glass: rgba(255, 255, 255, 0.04);
  --w: #fff;
  --w-2: rgba(255, 255, 255, 0.95);
  --cor-suave: #6e5a4a;
  --cor-texto: var(--ink);
  --cor-destaque-card: var(--brass);

  --timeline-1: #b07a2b;
  --timeline-2: #a96c16;

  --borda-card: rgba(0, 0, 0, 0.2);
}

/* dark theme variables (keeps fallbacks) */
:root[data-theme="dark"] {
  --paper: #1a1714;
  --paper-dark: #14110f;
  --ink: #ede6db;
  --muted-ink: #cfc4b6;
  --brass: #a67c2a;
  --brass-dark: #7f5e17;
  --accent: var(--brass);
  --accent-strong: var(--brass-dark);

  /* solid dark fallback to avoid flicker */
  --cor-fundo-principal-solid: #0b0b0b;
  --cor-fundo-principal-grad: linear-gradient(180deg, #0b0b0b, #111212);
  --cor-fundo-principal: var(--cor-fundo-principal-grad);
  --cor-texto: var(--ink);
  --cor-destaque-card: var(--brass);

  --borda-card: rgba(255, 255, 255, 0.5);
}

/* --------------------
   Reset / base
   -------------------- */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
html,
body {
  height: 100%;
}

/* IMPORTANT:
   Use background-color (solid) on html/body to avoid banding on initial paint.
   Keep gradient available (var --cor-fundo-principal) but do not animate it.
*/
html {
  background-color: var(--cor-fundo-principal-solid);
  /* If you still want the gradient applied, it will be layered in content
     or via elements that don't cause banding. Using color on html avoids paint stripes. */
  color-scheme: light dark;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* body.header-main uses the solid background too and disables transitions */
body.body-main {
  font-family: "Roboto", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  background-color: var(--cor-fundo-principal-solid);
  color: var(--cor-texto);
  line-height: 1.55;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background 0s linear !important; /* remove animation that creates flicker */
}

/* keep a safe 'gradiented paper' surface only where needed
   (containers can use the gradient but we won't rely on it for base paint) */
main.container {
  max-width: 1100px;
  margin: 28px auto 80px;
  padding: 0 20px;
}

/* typography */
h1,
h2,
h3,
h4 {
  font-family: "Cormorant Garamond", serif;
  color: var(--ink);
}

/* links */
a {
  color: var(--accent);
  text-decoration: underline dotted;
  text-underline-offset: 3px;
}
a:hover {
  color: var(--accent-strong);
  text-decoration-style: solid;
}

/* utility */
.section-flourish {
  display: inline-block;
  vertical-align: middle;
  margin-left: 0.8rem;
  opacity: 0.9;
  transform: translateY(2px);
}
.emboss {
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.45), 0 -1px 0 rgba(0, 0, 0, 0.04);
}

/* icons color */
.fas,
.far,
.fal,
.fab {
  color: var(--cor-texto);
}

a {
  text-decoration: none;
}
